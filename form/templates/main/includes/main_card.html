{% load static %}
{% block jsignature_dependent_jquery_header %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
{% endblock %}
<div class="card shadow mb-4" xmlns="http://www.w3.org/1999/html">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary" style="float:left; padding-right: 9em;">Psych Consult Form</h6>
    </div>
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <div style="margin-top:1em; margin-bottom:1em; margin-right: 2em;" class="alert alert-{% if message.tags %}{{ message.tags }}{% endif %}" role="alert">{{ message }}</div>
            {% endfor %}
        </ul>
    {% endif %}
    {% if user.is_authenticated and user_is_in_admins %}
        <div id="div_add_patient" style="margin-left: 10px; display:none; background-color:#e0ffcc">
            <h3>Add New Patient:</h3>
            <table class="table">
                <tbody>
                    <form name="form_add_patient" action="./api/v1/add_patient" method="POST">
                        {% csrf_token %}
                        <tr><td>First Name:</td><td>{{ patient_form.first_name }}</td></tr>
                        <tr><td>Last Name:</td><td>{{ patient_form.last_name }}</td></tr>
                        <tr><td>D.O.B.:</td><td>{{ patient_form.dob }}</td></tr>
                        <tr><td></td><td><input type="submit" value="Submit New Patient"></td></tr>
                    </form>
                </tbody>
            </table>
        </div>
        <div class="card-body">
            <form id='form_to_submit' action="/submit_form" method="post">
                {% csrf_token %}

                <div class="mx-auto" style="width: 100%;">
                    <h2 class="text-dark">Psychologist Consultation / Follow-Up</h2>
                </div>
                <br />
                {% if form.errors or form.non_field_errors %}
                    <p>{{ form.errors }}</p>
                    <p>{{ form.non_field_errors }}</p>
                {% endif %}
                <table class="table table-borderless">
                    <tbody>
                        <tr>
                            <td>
                                {{ form.patient.errors }}
                                <label for="{{ form.patient.id_for_label }}">Patient: <a id="a_add_patient" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg></a>
                                </label>
                            </td>
                            <td>
                                {{ form.patient }}
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td id="previous_patient_forms">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{ form.physician.errors }}
                                <label for="{{ form.physician.id_for_label }}">Physician: </label>
                            </td>
                            <td>
                                {{ form.physician }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{ form.facility.errors }}
                                <label for="{{ form.facility.id_for_label }}">Facility: <a href="./admin/form/facility/add"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg></a>
                                </label>
                            </td>
                            <td>
                                {{ form.facility }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{ form.date.errors }}
                                <label for="{{ form.date.id_for_label }}">Date:</label>
                            </td>
                            <td>
                                {{ form.date }}
                            </td>
                        </tr>
                    </tbody>
                </table>

                <br />
                <br />

                <h5 class="text-dark">Subjective</h5>

                <div class="fieldWrapper">
                    {{ form.subjective_options.errors }}
                    <label for="{{ form.subjective_boilerplate_options.id_for_label }}">Subjective Boilerplate Options <a href="./admin/form/subjectiveboilerplateoption/add/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                      <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg></a>
                    </label>
                    <br />
                    {{ form.subjective_boilerplate_options }}
                </div>
                <br />
                <div class="fieldWrapper">
                    {{ form.subjective_options.errors }}
                    <label for="{{ form.subjective_options.id_for_label }}">Subjective Options <a href="./admin/form/subjectiveoption/add/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                      <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg></a>
                    </label>
                    <br />
                    {{ form.subjective_options }}
                </div>
                <br />
                <div class="fieldWrapper">
                    {{ form.chief_complaints_problems_history.errors }}
                    <label style="font-size:1.1em"for="{{ form.chief_complaints_problems_history.id_for_label }}">Chief Complaints, Presenting Problems, and History:</label>
                    <br />
                    {{ form.chief_complaints_problems_history }}
                </div>

                <br />
                <div class="mx-auto" style="width: 100%;">
                    <h3 class="text-dark">Mental Status Examination</h3>
                </div>

                <!---->
                <h5 class="text-dark">Objective</h5>
                <p>Staff / Other Reported</p>
                <div class="container">
                    <div class="wrapper" style="float:left;">
                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Aggressive Behavior</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.agg_behavior_physical.errors }}
                                    <label for="{{ form.agg_behavior_physical.id_for_label }}">Physical</label>
                                    {{ form.agg_behavior_physical }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.agg_behavior_verbal.errors }}
                                    <label for="{{ form.agg_behavior_verbal.id_for_label }}">Verbal</label>
                                    {{ form.agg_behavior_verbal }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.agg_behavior_gestures.errors }}
                                    <label for="{{ form.agg_behavior_gestures.id_for_label }}">Gestures</label>
                                    {{ form.agg_behavior_gestures }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.agg_behavior_threatening.errors }}
                                    <label for="{{ form.agg_behavior_threatening.id_for_label }}">Threatening</label>
                                    {{ form.agg_behavior_threatening }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.agg_behavior_notes.errors }}
                                    <label for="{{ form.agg_behavior_notes.id_for_label }}">Aggressive behavior notes:</label>
                                    <br />
                                    {{ form.agg_behavior_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">General Appearance</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.gen_appearance_well_groomed.errors }}
                                    <label for="{{ form.gen_appearance_well_groomed.id_for_label }}">Well groomed</label>
                                    {{ form.gen_appearance_well_groomed }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.gen_appearance_fairly_groomed.errors }}
                                    <label for="{{ form.gen_appearance_fairly_groomed.id_for_label }}">Fairly groomed</label>
                                    {{ form.gen_appearance_fairly_groomed }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.gen_appearance_poorly_groomed.errors }}
                                    <label for="{{ form.gen_appearance_poorly_groomed.id_for_label }}">Poorly groomed</label>
                                    {{ form.gen_appearance_poorly_groomed }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.gen_appearance_disheveled.errors }}
                                    <label for="{{ form.gen_appearance_disheveled.id_for_label }}">Disheveled</label>
                                    {{ form.gen_appearance_disheveled }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.gen_appearance_notes.errors }}
                                    <label for="{{ form.agg_behavior_notes.id_for_label }}">General appearance notes:</label>
                                    <br />
                                    {{ form.gen_appearance_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Treatment & Compliance</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.treat_and_compliance_acceptable.errors }}
                                    <label for="{{ form.treat_and_compliance_acceptable.id_for_label }}">Acceptable</label>
                                    {{ form.treat_and_compliance_acceptable }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.treat_and_compliance_low_motivation.errors }}
                                    <label for="{{ form.treat_and_compliance_low_motivation.id_for_label }}">Low motivation</label>
                                    {{ form.treat_and_compliance_low_motivation }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.treat_and_compliance_resistive.errors }}
                                    <label for="{{ form.treat_and_compliance_resistive.id_for_label }}">Resistive</label>
                                    {{ form.treat_and_compliance_resistive }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.treat_and_compliance_argumentative.errors }}
                                    <label for="{{ form.treat_and_compliance_argumentative.id_for_label }}">Argumentative</label>
                                    {{ form.treat_and_compliance_argumentative }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.treat_and_compliance_exit_seeking.errors }}
                                    <label for="{{ form.treat_and_compliance_exit_seeking.id_for_label }}">Exit seeking</label>
                                    {{ form.treat_and_compliance_exit_seeking }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.treat_and_compliance_wandering.errors }}
                                    <label for="{{ form.treat_and_compliance_wandering.id_for_label }}">Wandering</label>
                                    {{ form.treat_and_compliance_wandering }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.treat_and_compliance_notes.errors }}
                                    <label for="{{ form.treat_and_compliance_notes.id_for_label }}">Treatment & Compliance notes:</label>
                                    <br />
                                    {{ form.treat_and_compliance_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Inappropriate Behavior</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.inappropriate_behavior.errors }}
                                    <label for="{{ form.inappropriate_behavior.id_for_label }}">Inappropriate Behavior</label>
                                    {{ form.inappropriate_behavior }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.inappropriate_behavior_notes.errors }}
                                    <label for="{{ form.inappropriate_behavior_notes.id_for_label }}">Inappropriate Behavior notes:</label>
                                    <br />
                                    {{ form.inappropriate_behavior_notes }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="wrapper" style="float:left;">
                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Attitude</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.attitude_cooperative.errors }}
                                    <label for="{{ form.attitude_cooperative.id_for_label }}">Cooperative</label>
                                    {{ form.attitude_cooperative }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.attitude_uncooperative.errors }}
                                    <label for="{{ form.attitude_uncooperative.id_for_label }}">Uncooperative</label>
                                    {{ form.attitude_uncooperative }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.attitude_marginally_cooperative.errors }}
                                    <label for="{{ form.attitude_marginally_cooperative.id_for_label }}">Marginally cooperative</label>
                                    {{ form.attitude_marginally_cooperative }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.attitude_other.errors }}
                                    <label for="{{ form.attitude_other.id_for_label }}">Other</label>
                                    {{ form.attitude_other }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.attitude_notes.errors }}
                                    <label for="{{ form.attitude_notes.id_for_label }}">Attitude notes:</label>
                                    <br />
                                    {{ form.attitude_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Speech</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.speech_intact.errors }}
                                    <label for="{{ form.speech_intact.id_for_label }}">Intact</label>
                                    {{ form.speech_intact }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.speech_pressured.errors }}
                                    <label for="{{ form.speech_pressured.id_for_label }}">Pressured</label>
                                    {{ form.speech_pressured }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.speech_hyperverbal.errors }}
                                    <label for="{{ form.speech_hyperverbal.id_for_label }}">Hyperverbal</label>
                                    {{ form.speech_hyperverbal }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.speech_loud.errors }}
                                    <label for="{{ form.speech_loud.id_for_label }}">Loud</label>
                                    {{ form.speech_loud }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.speech_slow.errors }}
                                    <label for="{{ form.speech_slow.id_for_label }}">Slow</label>
                                    {{ form.speech_slow }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.speech_unintelligible.errors }}
                                    <label for="{{ form.speech_unintelligible.id_for_label }}">Unintelligible</label>
                                    {{ form.speech_unintelligible }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.speech_yelling_out.errors }}
                                    <label for="{{ form.speech_yelling_out.id_for_label }}">Yelling out</label>
                                    {{ form.speech_yelling_out }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.speech_perseverative.errors }}
                                    <label for="{{ form.speech_perseverative.id_for_label }}">Perseverative</label>
                                    {{ form.speech_perseverative }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.speech_notes.errors }}
                                    <label for="{{ form.speech_notes.id_for_label }}">Speech notes:</label>
                                    <br />
                                    {{ form.speech_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Verbal Abilities</p>
                            <div style="font-weight:bold;margin-left:1em; margin-bottom:1em;">Receptive</div>
                            <div class="indent_checkboxes" style="margin-left:2em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.verbal_abilities_receptive_language_sufficient.errors }}
                                    <label for="{{ form.verbal_abilities_receptive_language_sufficient.id_for_label }}">Sufficient</label>
                                    {{ form.verbal_abilities_receptive_language_sufficient }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.verbal_abilities_receptive_language_impaired.errors }}
                                    <label for="{{ form.verbal_abilities_receptive_language_impaired.id_for_label }}">Impaired</label>
                                    {{ form.verbal_abilities_receptive_language_impaired }}
                                </div>
                            </div>
                            <div style="font-weight:bold;margin-left:1em; margin-bottom:1em;">Expressive</div>
                            <div class="indent_checkboxes" style="margin-left:2em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.verbal_abilities_expressive_language_sufficient.errors }}
                                    <label for="{{ form.verbal_abilities_expressive_language_sufficient.id_for_label }}">Sufficient</label>
                                    {{ form.verbal_abilities_expressive_language_sufficient }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.verbal_abilities_expressive_language_impaired.errors }}
                                    <label for="{{ form.verbal_abilities_expressive_language_impaired.id_for_label }}">Impaired</label>
                                    {{ form.verbal_abilities_expressive_language_impaired }}
                                </div>
                            </div>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em; display:none;">
                                <div class="fieldWrapper">
                                    {{ form.verbal_abilities_notes.errors }}
                                    <label for="{{ form.verbal_abilities_notes.id_for_label }}">Verbal Abilities notes:</label>
                                    <br />
                                    {{ form.verbal_abilities_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Communication</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.communication_verbal.errors }}
                                    <label for="{{ form.communication_verbal.id_for_label }}">Verbal</label>
                                    {{ form.communication_verbal }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.communication_non_verbal.errors }}
                                    <label for="{{ form.communication_non_verbal.id_for_label }}">Non-verbal</label>
                                    {{ form.communication_non_verbal }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.communication_minimally_verbal.errors }}
                                    <label for="{{ form.communication_minimally_verbal.id_for_label }}">Minimally verbal</label>
                                    {{ form.communication_minimally_verbal }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.communication_withdrawn.errors }}
                                    <label for="{{ form.communication_withdrawn.id_for_label }}">Withdrawn</label>
                                    {{ form.communication_withdrawn }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.communication_avoidant.errors }}
                                    <label for="{{ form.communication_avoidant.id_for_label }}">Avoidant</label>
                                    {{ form.communication_avoidant }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.communication_evasive.errors }}
                                    <label for="{{ form.communication_evasive.id_for_label }}">Evasive</label>
                                    {{ form.communication_evasive }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.communication_notes.errors }}
                                    <label for="{{ form.communication_notes.id_for_label }}">Communication notes:</label>
                                    <br />
                                    {{ form.communication_notes }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="wrapper" style="float:left;">
                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Perceptual Disturbances</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.perceptual_disturbances_none.errors }}
                                    <label for="{{ form.perceptual_disturbances_none.id_for_label }}">None</label>
                                    {{ form.perceptual_disturbances_none }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.perceptual_disturbances_hallucinations.errors }}
                                    <label for="{{ form.perceptual_disturbances_hallucinations.id_for_label }}">Hallucinations</label>
                                    {{ form.perceptual_disturbances_hallucinations }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.perceptual_disturbances_visual.errors }}
                                    <label for="{{ form.perceptual_disturbances_visual.id_for_label }}">Visual</label>
                                    {{ form.perceptual_disturbances_visual }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.perceptual_disturbances_auditory.errors }}
                                    <label for="{{ form.perceptual_disturbances_auditory.id_for_label }}">Auditory</label>
                                    {{ form.perceptual_disturbances_auditory }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.perceptual_disturbances_command.errors }}
                                    <label for="{{ form.perceptual_disturbances_command.id_for_label }}">Command</label>
                                    {{ form.perceptual_disturbances_command }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.perceptual_disturbances_tactile.errors }}
                                    <label for="{{ form.perceptual_disturbances_tactile.id_for_label }}">Tactile</label>
                                    {{ form.perceptual_disturbances_tactile }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.perceptual_disturbances_olfactory.errors }}
                                    <label for="{{ form.perceptual_disturbances_olfactory.id_for_label }}">Olfactory</label>
                                    {{ form.perceptual_disturbances_olfactory }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.perceptual_disturbances_notes.errors }}
                                    <label for="{{ form.perceptual_disturbances_notes.id_for_label }}">Perceptual Disturbances notes:</label>
                                    <br />
                                    {{ form.perceptual_disturbances_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Level of Consciousness</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.level_of_consciousness_alert.errors }}
                                    <label for="{{ form.level_of_consciousness_alert.id_for_label }}">Alert</label>
                                    {{ form.level_of_consciousness_alert }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.level_of_consciousness_confused.errors }}
                                    <label for="{{ form.level_of_consciousness_confused.id_for_label }}">Confusion</label>
                                    {{ form.level_of_consciousness_confused }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.level_of_consciousness_drowsy.errors }}
                                    <label for="{{ form.level_of_consciousness_drowsy.id_for_label }}">Drowsy</label>
                                    {{ form.level_of_consciousness_drowsy }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.level_of_consciousness_somnolent.errors }}
                                    <label for="{{ form.level_of_consciousness_somnolent.id_for_label }}">Somnolent</label>
                                    {{ form.level_of_consciousness_somnolent }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.level_of_consciousness_fluctuating.errors }}
                                    <label for="{{ form.level_of_consciousness_fluctuating.id_for_label }}">Fluctuating</label>
                                    {{ form.level_of_consciousness_fluctuating }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.level_of_consciousness_notes.errors }}
                                    <label for="{{ form.level_of_consciousness_notes.id_for_label }}">Level of Consciousness notes:</label>
                                    <br />
                                    {{ form.level_of_consciousness_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Thought Process</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.thought_process_linear.errors }}
                                    <label for="{{ form.thought_process_linear.id_for_label }}">Linear</label>
                                    {{ form.thought_process_linear }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_process_disorganized.errors }}
                                    <label for="{{ form.thought_process_disorganized.id_for_label }}">Disorganized</label>
                                    {{ form.thought_process_disorganized }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_process_fragmented.errors }}
                                    <label for="{{ form.thought_process_fragmented.id_for_label }}">Fragmented</label>
                                    {{ form.thought_process_fragmented }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_process_racing.errors }}
                                    <label for="{{ form.thought_process_racing.id_for_label }}">Racing</label>
                                    {{ form.thought_process_racing }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_process_circumstantial.errors }}
                                    <label for="{{ form.thought_process_circumstantial.id_for_label }}">Circumstantial</label>
                                    {{ form.thought_process_circumstantial }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_process_tangential.errors }}
                                    <label for="{{ form.thought_process_tangential.id_for_label }}">Tangential</label>
                                    {{ form.thought_process_tangential }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_process_blocking.errors }}
                                    <label for="{{ form.thought_process_blocking.id_for_label }}">Blocking</label>
                                    {{ form.thought_process_blocking }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.thought_process_notes.errors }}
                                    <label for="{{ form.thought_process_notes.id_for_label }}">Thought process notes:</label>
                                    <br />
                                    {{ form.thought_process_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Thought Content</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.thought_content_normal.errors }}
                                    <label for="{{ form.thought_content_normal.id_for_label }}">Normal</label>
                                    {{ form.thought_content_normal }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_content_delusions.errors }}
                                    <label for="{{ form.thought_content_delusions.id_for_label }}">Delusions</label>
                                    {{ form.thought_content_delusions }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_content_persecutory.errors }}
                                    <label for="{{ form.thought_content_persecutory.id_for_label }}">Persecutory</label>
                                    {{ form.thought_content_persecutory }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_content_grandiose.errors }}
                                    <label for="{{ form.thought_content_grandiose.id_for_label }}">Grandiose</label>
                                    {{ form.thought_content_grandiose }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_content_religious.errors }}
                                    <label for="{{ form.thought_content_religious.id_for_label }}">Religious</label>
                                    {{ form.thought_content_religious }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_content_self_referential.errors }}
                                    <label for="{{ form.thought_content_self_referential.id_for_label }}">Self referential</label>
                                    {{ form.thought_content_self_referential }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.thought_content_poverty_of_content.errors }}
                                    <label for="{{ form.thought_content_poverty_of_content.id_for_label }}">Poverty of content</label>
                                    {{ form.thought_content_poverty_of_content }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.thought_content_notes.errors }}
                                    <label for="{{ form.thought_content_notes.id_for_label }}">Thought Content notes:</label>
                                    <br />
                                    {{ form.thought_content_notes }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="wrapper" style="float:left;">
                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Mood</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.mood_euthymic.errors }}
                                    <label for="{{ form.mood_euthymic.id_for_label }}">Euthymic</label>
                                    {{ form.mood_euthymic }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.mood_depressed.errors }}
                                    <label for="{{ form.mood_depressed.id_for_label }}">Depressed</label>
                                    {{ form.mood_depressed }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.mood_anxious.errors }}
                                    <label for="{{ form.mood_anxious.id_for_label }}">Anxious</label>
                                    {{ form.mood_anxious }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.mood_irritable.errors }}
                                    <label for="{{ form.mood_irritable.id_for_label }}">Irritable</label>
                                    {{ form.mood_irritable }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.mood_angry.errors }}
                                    <label for="{{ form.mood_angry.id_for_label }}">Angry</label>
                                    {{ form.mood_angry }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.mood_tearful.errors }}
                                    <label for="{{ form.mood_tearful.id_for_label }}">Tearful</label>
                                    {{ form.mood_tearful }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.mood_elated.errors }}
                                    <label for="{{ form.mood_elated.id_for_label }}">Elated</label>
                                    {{ form.mood_elated }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.mood_labile.errors }}
                                    <label for="{{ form.mood_labile.id_for_label }}">Labile</label>
                                    {{ form.mood_labile }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.mood_notes.errors }}
                                    <label for="{{ form.mood_notes.id_for_label }}">Mood notes:</label>
                                    <br />
                                    {{ form.mood_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Affect</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.affect_appropriate.errors }}
                                    <label for="{{ form.affect_appropriate.id_for_label }}">Appropriate</label>
                                    {{ form.affect_appropriate }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.affect_flat.errors }}
                                    <label for="{{ form.affect_flat.id_for_label }}">Flat</label>
                                    {{ form.affect_flat }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.affect_blunted.errors }}
                                    <label for="{{ form.affect_blunted.id_for_label }}">Blunted</label>
                                    {{ form.affect_blunted }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.affect_expansive.errors }}
                                    <label for="{{ form.affect_expansive.id_for_label }}">Expansive</label>
                                    {{ form.affect_expansive }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.affect_agitated.errors }}
                                    <label for="{{ form.affect_agitated.id_for_label }}">Agitated</label>
                                    {{ form.affect_agitated }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.affect_notes.errors }}
                                    <label for="{{ form.affect_notes.id_for_label }}">Affect notes:</label>
                                    <br />
                                    {{ form.affect_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Harmfulness</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.harmfulness_self.errors }}
                                    <label for="{{ form.harmfulness_self.id_for_label }}">Self</label>
                                    {{ form.harmfulness_self }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.harmfulness_others.errors }}
                                    <label for="{{ form.harmfulness_others.id_for_label }}">Others</label>
                                    {{ form.harmfulness_others }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.harmfulness_negative_statements.errors }}
                                    <label for="{{ form.harmfulness_negative_statements.id_for_label }}">Negative Statements</label>
                                    {{ form.harmfulness_negative_statements }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.harmfulness_other.errors }}
                                    <label for="{{ form.harmfulness_other.id_for_label }}">Other</label>
                                    {{ form.harmfulness_other }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.harmfulness_notes.errors }}
                                    <label for="{{ form.harmfulness_notes.id_for_label }}">Harmfulness notes:</label>
                                    <br />
                                    {{ form.harmfulness_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Attention / Concentration</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.attention_concentration_good.errors }}
                                    <label for="{{ form.attention_concentration_good.id_for_label }}">Good</label>
                                    {{ form.attention_concentration_good }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.attention_concentration_fair.errors }}
                                    <label for="{{ form.attention_concentration_fair.id_for_label }}">Fair</label>
                                    {{ form.attention_concentration_fair }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.attention_concentration_poor.errors }}
                                    <label for="{{ form.attention_concentration_poor.id_for_label }}">Poor</label>
                                    {{ form.attention_concentration_poor }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.attention_concentration_notes.errors }}
                                    <label for="{{ form.attention_concentration_notes.id_for_label }}">Attention / Concentration notes:</label>
                                    <br />
                                    {{ form.attention_concentration_notes }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="wrapper" style="float:left;">
                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Orientation</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.orientation_time.errors }}
                                    <label for="{{ form.orientation_time.id_for_label }}">Time</label>
                                    {{ form.orientation_time }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.orientation_place.errors }}
                                    <label for="{{ form.orientation_place.id_for_label }}">Place</label>
                                    {{ form.orientation_place }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.orientation_person.errors }}
                                    <label for="{{ form.orientation_person.id_for_label }}">Person</label>
                                    {{ form.orientation_person }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.orientation_situation.errors }}
                                    <label for="{{ form.orientation_situation.id_for_label }}">Situation</label>
                                    {{ form.orientation_situation }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.orientation_disoriented.errors }}
                                    <label for="{{ form.orientation_disoriented.id_for_label }}">Disoriented</label>
                                    {{ form.orientation_disoriented }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.orientation_notes.errors }}
                                    <label for="{{ form.orientation_notes.id_for_label }}">Orientation notes:</label>
                                    <br />
                                    {{ form.orientation_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Insight & Judgement</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.insight_judgement_good.errors }}
                                    <label for="{{ form.insight_judgement_good.id_for_label }}">Good</label>
                                    {{ form.insight_judgement_good }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.insight_judgement_fair.errors }}
                                    <label for="{{ form.insight_judgement_fair.id_for_label }}">Fair</label>
                                    {{ form.insight_judgement_fair }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.insight_judgement_poor.errors }}
                                    <label for="{{ form.insight_judgement_poor.id_for_label }}">Poor</label>
                                    {{ form.insight_judgement_poor }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.insight_judgement_notes.errors }}
                                    <label for="{{ form.insight_judgement_notes.id_for_label }}">Insight & Judgement notes:</label>
                                    <br />
                                    {{ form.insight_judgement_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Sleep Disturbance</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.sleep_disturbance.errors }}
                                    <label for="{{ form.sleep_disturbance.id_for_label }}">Sleep Disturbance</label>
                                    {{ form.sleep_disturbance }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.sleep_disturbance_apnea.errors }}
                                    <label for="{{ form.sleep_disturbance_apnea.id_for_label }}">Apnea</label>
                                    {{ form.sleep_disturbance_apnea }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.sleep_disturbance_narcolepsy.errors }}
                                    <label for="{{ form.sleep_disturbance_narcolepsy.id_for_label }}">Narcolepsy</label>
                                    {{ form.sleep_disturbance_narcolepsy }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.sleep_disturbance_nightmares.errors }}
                                    <label for="{{ form.sleep_disturbance_nightmares.id_for_label }}">Nightmares</label>
                                    {{ form.sleep_disturbance_nightmares }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.sleep_disturbance_hypnagogic_hypnopompic_hallucinations.errors }}
                                    <label for="{{ form.sleep_disturbance_hypnagogic_hypnopompic_hallucinations.id_for_label }}">Hypnagogic / Hypnopompic Hallucinations</label>
                                    {{ form.sleep_disturbance_hypnagogic_hypnopompic_hallucinations }}
                                </div>
                                <div class="fieldWrapper" style="display:none;">
                                    {{ form.sleep_disturbance_notes.errors }}
                                    <label for="{{ form.sleep_disturbance_notes.id_for_label }}">Sleep Disturbance notes:</label>
                                    <br />
                                    {{ form.sleep_disturbance_notes }}
                                </div>
                            </div>
                        </div>

                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Appetite Change</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.appetite_change_no.errors }}
                                    <label for="{{ form.appetite_change_no.id_for_label }}">No</label>
                                    {{ form.appetite_change_no }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.appetite_change_yes.errors }}
                                    <label for="{{ form.appetite_change_yes.id_for_label }}">Yes</label>
                                    {{ form.appetite_change_yes }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.appetite_change_notes.errors }}
                                    <label for="{{ form.appetite_change_notes.id_for_label }}">Appetite Change notes:</label>
                                    <br />
                                    {{ form.appetite_change_notes }}
                                </div>
                            </div>
                        </div>
                    </div>
<!--                    <div class="wrapper" style="float:left;">-->
<!--                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">-->
<!--                            <p style="font-size:1.1em">Misc.</p>-->
<!--                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">-->
<!--                                <div class="fieldWrapper">-->
<!--                                    {{ form.tobacco_screen.errors }}-->
<!--                                    <label for="{{ form.tobacco_screen.id_for_label }}">Tobacco screen</label>-->
<!--                                    {{ form.tobacco_screen }}-->
<!--                                </div>-->
<!--                                <div class="fieldWrapper">-->
<!--                                    {{ form.tele_health.errors }}-->
<!--                                    <label for="{{ form.tele_health.id_for_label }}">Tele-Health</label>-->
<!--                                    {{ form.tele_health }}-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="wrapper" style="float:left;">
                        <div type="col" style="float:left; padding-right:2em; min-height:350px;">
                            <p style="font-size:1.1em">Other</p>
                            <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                                <div class="fieldWrapper">
                                    {{ form.mental_capacity.errors }}
                                    <label for="{{ form.mental_capacity.id_for_label }}">Mental Capacity</label>
                                    {{ form.mental_capacity }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.placement_issues.errors }}
                                    <label for="{{ form.placement_issues.id_for_label }}">Placement Issues</label>
                                    {{ form.placement_issues }}
                                </div>
                                <div class="fieldWrapper">
                                    {{ form.tele_health.errors }}
                                    <label for="{{ form.tele_health.id_for_label }}">Tele-Health</label>
                                    {{ form.tele_health }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="clear:both">
                    <h5 class="text-dark">Assessment</h5>
                    <div class="fieldWrapper">
                        <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                            <div class="fieldWrapper">
                                {{ form.icd_10_codes.errors }}
                                <label for="{{ form.icd_10_codes.id_for_label }}">ICD-10 Codes:</label>
                                <br />
                                <input id="filterICD10" type="text" placeholder="Search...">
                                <br />
                                {{ form.icd_10_codes }}
                            </div>
                        </div>
                    </div>
                    <div class="fieldWrapper">
                        <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                            <div class="fieldWrapper">
                                {{ form.diagnostic_impression.errors }}
                                <label for="{{ form.diagnostic_impression.id_for_label }}">Diagnostic Impression:</label>
                                <br />
                                {{ form.diagnostic_impression }}
                            </div>
                        </div>
                    </div>
                    <h5 class="text-dark">Plan</h5>
                    <div class="fieldWrapper">
                        <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                            <div class="fieldWrapper">
                                {{ form.current_medication.errors }}
                                <label for="{{ form.current_medication.id_for_label }}">Current Medication:</label>
                                <br />
                                {{ form.current_medication }}
                            </div>
                        </div>
                    </div>
                    <div class="fieldWrapper">
                        <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                            <div class="fieldWrapper">
                                {{ form.discussion_treatment_options.errors }}
                                <label for="{{ form.discussion_treatment_options.id_for_label }}">Discussion and Treatment Options: <a href="./admin/form/discussiontreatmentoption/add"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg></a>
                                </label>
                                <br />
                                {{ form.discussion_treatment_options }}
                            </div>
                        </div>
                    </div>
                    <div class="fieldWrapper">
                        <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                            <div class="fieldWrapper">
                                {{ form.discussion_treatment.errors }}
                                <label for="{{ form.discussion_treatment.id_for_label }}">Discussion and Treatment Considerations:</label>
                                <br />
                                {{ form.discussion_treatment }}
                            </div>
                        </div>
                    </div>
                    <div class="fieldWrapper">
                        <div class="indent_checkboxes" style="margin-left:1em; margin-bottom:1em;">
                            <div class="fieldWrapper">
                                {{ form.signature.errors }}
                                <table class="table table-borderless">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <label for="{{ form.signature.id_for_label }}">Signature:</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                {{ form.media }}
                                                {{ form.signature }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span style="font-weight:bold">Norman Hendricksen, Ph.D.</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex flex-row-reverse">
                        <button type="submit" class="btn btn-primary" style="margin-left:1em;" id="button-submit">Submit</button>
                        <div class="fieldWrapper">
                            {{ form.preview.errors }}
                            <label for="{{ form.preview.id_for_label }}">Preview</label>
                            {{ form.preview }}
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <script type="text/javascript">
            $("#id_subjective_boilerplate_options").change(function() {
                console.log($(this).val());
                var id_list = String($(this).val());
                $.ajax({
                    url: "{% url 'subjective_boilerplate_option' %}",
                    type: "get",
                    dataType: "json",
                    contentType: "application/json",
                    processData: true,
                    data: {"ids": id_list},
                    success: function (data) {
                        document.getElementById("id_chief_complaints_problems_history").value += data;
                    },
                    error: function(){
                      alert("Cannot get data");
                    }
                });
            });
            $("#id_subjective_options").change(function() {
                console.log($(this).val());
                var id_list = String($(this).val());
                $.ajax({
                    url: "{% url 'subjective_option' %}",
                    type: "get",
                    dataType: "json",
                    contentType: "application/json",
                    processData: true,
                    data: {"ids": id_list},
                    success: function (data) {
                        document.getElementById("id_chief_complaints_problems_history").value += '-' + data;
                    },
                    error: function(){
                      alert("Cannot get data");
                    }
                });
            });
            $("#id_discussion_treatment_options").change(function() {
                console.log($(this).val());
                var id_list = String($(this).val());
                $.ajax({
                    url: "{% url 'discussion_treatment_option' %}",
                    type: "get",
                    dataType: "json",
                    contentType: "application/json",
                    processData: true,
                    data: {"ids": id_list},
                    success: function (data) {
                        document.getElementById("id_discussion_treatment").value += data;
                    },
                    error: function(){
                      alert("Cannot get data");
                    }
                });
            });
            $("#id_icd_10_codes").change(function() {
                var id_list = String($(this).val());
                $.ajax({
                    url: "{% url 'icd_10_code_text' %}",
                    type: "get",
                    dataType: "json",
                    contentType: "application/json",
                    processData: true,
                    data: {"ids": id_list},
                    success: function (data) {
                        document.getElementById("id_diagnostic_impression").value += (data + ' ');
                        document.getElementById("filterICD10").value = '';
                        document.getElementById("filterICD10").focus();
                    },
                    error: function(){
                      alert("Cannot get data");
                    }
                });
            });
            $("#filterICD10").keyup(function() {
                //if ($("#filterICD10").val().length > 1) {
                    $.ajax({
                        url: "{% url 'filtered_icd_10_code_text' %}",
                        type: "get",
                        dataType: "json",
                        contentType: "application/json",
                        processData: true,
                        data: {'data': $(this).val()},
                        success: function (data) {
                            var select_string = '';
                            $.each(data, function(k, v) {
                                select_string += "<option value='" + v.id + "'>" + v.diagnosis_code +
                                                 " - " + v.abbreviated_description + "</option> "
                            });
                            $("#id_icd_10_codes").empty().append(select_string);
                        },
                        error: function(){
                          alert("Cannot get data");
                        }
                    });
                //};
            });
            $("#id_patient").change(function() {
                var patient_id = String($(this).val());
                $.ajax({
                    url: "{% url 'previous_patient_forms' %}",
                    type: "get",
                    dataType: "json",
                    contentType: "application/json",
                    processData: true,
                    data: {"patient_id": patient_id},
                    success: function (data) {
                        document.getElementById("previous_patient_forms").innerHTML = data;
                    },
                    error: function(){
                        alert("Cannot get data");
                    }
                });
            });
            $("#a_add_patient").click(function() {
                if ($("#div_add_patient").css("display") == "none") {
                    $("#div_add_patient").css("display", "block");
                    $("#id_first_name").focus();
                } else {
                    $("#div_add_patient").css("display", "none");
                }
            });
        </script>
    {% endif %}
</div>